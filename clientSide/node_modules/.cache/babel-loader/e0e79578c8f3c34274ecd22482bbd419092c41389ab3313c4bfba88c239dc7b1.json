{"ast":null,"code":"import _objectSpread from\"/Users/kevingetz/Desktop/repos/wedding-gifts-stripe/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useShoppingCart}from\"../context/ShoppingCartContext\";import{formatCurrency}from\"../utilities/formatCurrency\";import{CartItem}from\"./CartItem\";//import { checkOut } from \"../utilities/checkOut\";\nimport invItems from\"../data/items.json\";import Offcanvas from\"react-bootstrap/Offcanvas\";import Stack from\"react-bootstrap/Stack\";import Button from\"react-bootstrap/Button\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function ShoppingCart(_ref){var isOpen=_ref.isOpen;var _useShoppingCart=useShoppingCart(),closeCart=_useShoppingCart.closeCart,cartItems=_useShoppingCart.cartItems;function checkOut(){fetch(\"http://localhost:4000/create-checkout-session\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({items:cartItems})// all this code will get res back from server which is a url, and send user to url   \n}).then(function(res){console.log(res);if(res.ok)return res.json();console.log(\"res ok\",res.json);return res.json().then(function(json){return Promise.reject(json);});}).then(function(_ref2){var url=_ref2.url;window.location=url;}).catch(function(e){console.error(e.error);});}return/*#__PURE__*/_jsxs(Offcanvas,{show:isOpen,onHide:closeCart,placement:\"end\",children:[/*#__PURE__*/_jsx(Offcanvas.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Offcanvas.Title,{children:\"Cart\"})}),/*#__PURE__*/_jsx(Offcanvas.Body,{children:/*#__PURE__*/_jsxs(Stack,{gap:3,children:[cartItems.map(function(item){return/*#__PURE__*/_jsx(CartItem,_objectSpread({},item),item.id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"ms-auto fw-bold fs-5\",children:[\"Total\",\" \",formatCurrency(cartItems.reduce(function(total,cartItem){var item=invItems.find(function(i){return i.id===cartItem.id;});return total+((item===null||item===void 0?void 0:item.price)||0)*cartItem.quantity;},0))]}),/*#__PURE__*/_jsx(Button,{onClick:checkOut,children:\"Checkout\"})]})})]});}","map":{"version":3,"names":["useShoppingCart","formatCurrency","CartItem","invItems","Offcanvas","Stack","Button","ShoppingCart","isOpen","closeCart","cartItems","checkOut","fetch","method","headers","body","JSON","stringify","items","then","res","console","log","ok","json","Promise","reject","url","window","location","catch","e","error","map","item","id","reduce","total","cartItem","find","i","price","quantity"],"sources":["/Users/kevingetz/Desktop/repos/wedding-gifts-stripe/client/src/components/ShoppingCart.js"],"sourcesContent":["import { useShoppingCart } from \"../context/ShoppingCartContext\";\nimport { formatCurrency } from \"../utilities/formatCurrency\";\nimport { CartItem } from \"./CartItem\";\n//import { checkOut } from \"../utilities/checkOut\";\nimport invItems from \"../data/items.json\"\nimport Offcanvas from \"react-bootstrap/Offcanvas\";\nimport Stack from \"react-bootstrap/Stack\";\nimport Button from \"react-bootstrap/Button\";\n\nexport function ShoppingCart({ isOpen }) {\n    const { closeCart, cartItems } = useShoppingCart();\n   \n    function checkOut() {\n        fetch(\"http://localhost:4000/create-checkout-session\", {\n          method: 'POST',\n          headers: {\n              'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n              items: cartItems  \n          })\n        // all this code will get res back from server which is a url, and send user to url   \n        }).then(res => {\n          console.log(res)\n          if (res.ok) return res.json()\n          console.log(\"res ok\",res.json)\n          return res.json().then(json => Promise.reject(json))\n        }).then(({ url }) => {\n          window.location = url\n        }).catch(e => {\n            console.error(e.error)\n        })\n      }\n\n    return <Offcanvas show={isOpen} onHide={closeCart} placement=\"end\">\n        <Offcanvas.Header closeButton>\n            <Offcanvas.Title>Cart</Offcanvas.Title>\n        </Offcanvas.Header>\n        <Offcanvas.Body>\n            <Stack gap={3}>\n                {cartItems.map(item => (\n                    <CartItem key={item.id} {...item} />\n                ))}\n                <div className=\"ms-auto fw-bold fs-5\">\n                    Total{\" \"}\n                    {formatCurrency(\n                        cartItems.reduce((total, cartItem) => {\n                            const item = invItems.find(i => i.id === cartItem.id)\n                            return total + (item?.price || 0) * cartItem.quantity\n                        }, 0)\n                    )}\n                </div>\n                <Button onClick={checkOut}>Checkout</Button>\n            </Stack>\n        </Offcanvas.Body>\n    </Offcanvas>\n}"],"mappings":"+IAAA,OAASA,eAAe,KAAQ,gCAAgC,CAChE,OAASC,cAAc,KAAQ,6BAA6B,CAC5D,OAASC,QAAQ,KAAQ,YAAY,CACrC;AACA,MAAOC,SAAQ,KAAM,oBAAoB,CACzC,MAAOC,UAAS,KAAM,2BAA2B,CACjD,MAAOC,MAAK,KAAM,uBAAuB,CACzC,MAAOC,OAAM,KAAM,wBAAwB,CAAC,wFAE5C,MAAO,SAASC,aAAY,MAAa,IAAVC,OAAM,MAANA,MAAM,CACjC,qBAAiCR,eAAe,EAAE,CAA1CS,SAAS,kBAATA,SAAS,CAAEC,SAAS,kBAATA,SAAS,CAE5B,QAASC,SAAQ,EAAG,CAChBC,KAAK,CAAC,+CAA+C,CAAE,CACrDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,KAAK,CAAER,SACX,CAAC,CACH;AACA,CAAC,CAAC,CAACS,IAAI,CAAC,SAAAC,GAAG,CAAI,CACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChB,GAAIA,GAAG,CAACG,EAAE,CAAE,MAAOH,IAAG,CAACI,IAAI,EAAE,CAC7BH,OAAO,CAACC,GAAG,CAAC,QAAQ,CAACF,GAAG,CAACI,IAAI,CAAC,CAC9B,MAAOJ,IAAG,CAACI,IAAI,EAAE,CAACL,IAAI,CAAC,SAAAK,IAAI,QAAIC,QAAO,CAACC,MAAM,CAACF,IAAI,CAAC,GAAC,CACtD,CAAC,CAAC,CAACL,IAAI,CAAC,eAAa,IAAVQ,IAAG,OAAHA,GAAG,CACZC,MAAM,CAACC,QAAQ,CAAGF,GAAG,CACvB,CAAC,CAAC,CAACG,KAAK,CAAC,SAAAC,CAAC,CAAI,CACVV,OAAO,CAACW,KAAK,CAACD,CAAC,CAACC,KAAK,CAAC,CAC1B,CAAC,CAAC,CACJ,CAEF,mBAAO,MAAC,SAAS,EAAC,IAAI,CAAExB,MAAO,CAAC,MAAM,CAAEC,SAAU,CAAC,SAAS,CAAC,KAAK,wBAC9D,KAAC,SAAS,CAAC,MAAM,EAAC,WAAW,4BACzB,KAAC,SAAS,CAAC,KAAK,WAAC,MAAI,EAAkB,EACxB,cACnB,KAAC,SAAS,CAAC,IAAI,wBACX,MAAC,KAAK,EAAC,GAAG,CAAE,CAAE,WACTC,SAAS,CAACuB,GAAG,CAAC,SAAAC,IAAI,qBACf,KAAC,QAAQ,kBAAmBA,IAAI,EAAjBA,IAAI,CAACC,EAAE,CAAc,EACvC,CAAC,cACF,aAAK,SAAS,CAAC,sBAAsB,WAAC,OAC7B,CAAC,GAAG,CACRlC,cAAc,CACXS,SAAS,CAAC0B,MAAM,CAAC,SAACC,KAAK,CAAEC,QAAQ,CAAK,CAClC,GAAMJ,KAAI,CAAG/B,QAAQ,CAACoC,IAAI,CAAC,SAAAC,CAAC,QAAIA,EAAC,CAACL,EAAE,GAAKG,QAAQ,CAACH,EAAE,GAAC,CACrD,MAAOE,MAAK,CAAG,CAAC,CAAAH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEO,KAAK,GAAI,CAAC,EAAIH,QAAQ,CAACI,QAAQ,CACzD,CAAC,CAAE,CAAC,CAAC,CACR,GACC,cACN,KAAC,MAAM,EAAC,OAAO,CAAE/B,QAAS,UAAC,UAAQ,EAAS,GACxC,EACK,GACT,CAChB"},"metadata":{},"sourceType":"module","externalDependencies":[]}